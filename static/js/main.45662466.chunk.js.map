{"version":3,"sources":["components/Loader/Loader.tsx","store/loading.ts","store/posts.ts","store/postId.ts","store/post.ts","store/users.ts","store/userId.ts","store/comments.ts","store/hideComments.ts","helpers/api.ts","helpers/posts.ts","helpers/comments.ts","store/index.ts","components/Start/Start.tsx","helpers/users.ts","components/PostsList/PostsList.tsx","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["Loader","className","START_LOADING","FINISH_LOADING","startLoading","type","finishLoading","reducer","loading","action","SET_POSTS","setPosts","posts","SET_POST_ID","postId","SET_POST","setPost","post","id","userId","title","body","SET_USERS","setUsers","users","SET_USER_ID","SET_COMMENTS","setComments","comments","HIDE_COMMENTS","hiding","request","url","method","fetch","then","response","ok","json","Promise","reject","Error","status","statusText","getUserPosts","undefined","getPostDetails","result","deletePost","getPostComments","postNewComment","email","name","JSON","stringify","headers","deleteComment","commentId","rootReducer","combineReducers","loadingReducer","postsReducer","postIdReducer","postReducer","usersReducer","userIdReducer","commentsReducer","hidingReducer","isLoading","state","getPosts","getPostId","getPost","getUsers","getUserId","getComments","isHiding","loadPosts","dispatch","a","store","createStore","composeWithDevTools","applyMiddleware","thunk","Start","useDispatch","useSelector","onClick","PostsList","handleClick","setPostId","loadComments","loadPost","handleDeleteClick","allPosts","removePost","length","map","classNames","NewCommentForm","useState","setBody","setEmail","userName","setName","isValidForm","setIsValidForm","validator","changeInput","event","target","value","resetForm","validation","useMemo","test","useEffect","onSubmit","preventDefault","allComments","createComment","placeholder","onChange","PostDetails","hide","handleClickOnDeleteButton","removeComment","comment","App","setUserId","user","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.45662466.chunk.js","sourcesContent":["import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import { AnyAction } from 'redux';\n\n// Action types\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\n\n// Action creators\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\n\nconst reducer = (loading = false, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING:\n      return true;\n\n    case FINISH_LOADING:\n      return false;\n\n    default:\n      return loading;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_POSTS = 'SET_POSTS';\n\nexport const setPosts = (posts: Posts[]) => ({ type: SET_POSTS, posts });\n\nconst reducer = (posts = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n\n    default:\n      return posts;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_POST_ID = 'SET_POST_ID';\n\nexport const setPostId = (postId: number) => ({ type: SET_POST_ID, postId });\n\nconst reducer = (postId = 0, action: AnyAction) => {\n  switch (action.type) {\n    case SET_POST_ID:\n      return action.postId;\n\n    default:\n      return postId;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_POST = 'SET_POST';\n\nexport const setPost = (post: Posts) => ({ type: SET_POST, post });\n\nconst reducer = (post = {\n  id: 0,\n  userId: 0,\n  title: '',\n  body: '',\n}, action: AnyAction) => {\n  switch (action.type) {\n    case SET_POST:\n      return action.post;\n\n    default:\n      return post;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_USERS = 'SET_USERS';\n\nexport const setUsers = (users: Users[]) => ({ type: SET_USERS, users });\n\nconst reducer = (users = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_USERS:\n      return action.users;\n\n    default:\n      return users;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_USER_ID = 'SET_USER_ID';\n\nexport const setUserId = (userId: number) => ({ type: SET_USER_ID, userId });\n\nconst reducer = (userId = 0, action: AnyAction) => {\n  switch (action.type) {\n    case SET_USER_ID:\n      return action.userId;\n\n    default:\n      return userId;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_COMMENTS = 'SET_COMMENTS';\n\nexport const setComments = (comments: Comments[]) => ({\n  type: SET_COMMENTS,\n  comments,\n});\n\nconst reducer = (comments = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_COMMENTS:\n      return action.comments;\n\n    default:\n      return comments;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst HIDE_COMMENTS = 'HIDE_COMMENTS';\n\nexport const hideComments = () => ({ type: HIDE_COMMENTS });\n\nconst reducer = (hiding = false, action: AnyAction) => {\n  switch (action.type) {\n    case HIDE_COMMENTS:\n      return !hiding;\n\n    default:\n      return hiding;\n  }\n};\n\nexport default reducer;\n","export const BASE_URL = 'https://mate.academy/students-api';\n\nexport const request = (url: string, method?: RequestInit | undefined) => {\n  return fetch(`${BASE_URL}${url}`, method)\n    .then(response => {\n      if (!response.ok) {\n        return Promise.reject(\n          new Error(`${response.status} - ${response.statusText}`),\n        );\n      }\n\n      return response.json();\n    });\n};\n","import { request } from './api';\n\nexport const getUserPosts = (userId?: number) => {\n  if (userId === undefined || userId === 0) {\n    return request('/posts');\n  }\n\n  return request(`/posts?userId=${userId}`);\n};\n\nexport const getPostDetails = (postId: number) => {\n  const result = request(`/posts/${postId}/`);\n\n  if (!result) {\n    return {\n      id: 0,\n      userId: 0,\n      title: '',\n      body: '',\n    };\n  }\n\n  return result;\n};\n\nexport const deletePost = (postId: number) => {\n  return request(`/posts/${postId}`, {\n    method: 'DELETE',\n  });\n};\n","import { request } from './api';\n\nexport const getPostComments = (postId: number) => {\n  return request(`/comments?postId=${postId}`);\n};\n\nexport const postNewComment = (\n  postId: number,\n  body: string,\n  email: string,\n  name: string,\n) => {\n  return request('/comments', {\n    method: 'POST',\n    body: JSON.stringify({\n      postId,\n      body,\n      email,\n      name,\n    }),\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n  });\n};\n\nexport const deleteComment = (commentId: number) => {\n  return request(`/comments/${commentId}`, {\n    method: 'DELETE',\n  });\n};\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { Dispatch } from 'react';\n\nimport loadingReducer, { finishLoading, startLoading } from './loading';\nimport postsReducer, { setPosts } from './posts';\nimport postIdReducer from './postId';\nimport postReducer, { setPost } from './post';\nimport usersReducer, { setUsers } from './users';\nimport userIdReducer from './userId';\nimport commentsReducer, { setComments } from './comments';\nimport hidingReducer from './hideComments';\nimport { getUserPosts, deletePost, getPostDetails } from '../helpers/posts';\nimport { getAllUsers } from '../helpers/users';\nimport {\n  deleteComment,\n  getPostComments,\n  postNewComment,\n} from '../helpers/comments';\n\nconst rootReducer = combineReducers({\n  loading: loadingReducer,\n  posts: postsReducer,\n  postId: postIdReducer,\n  post: postReducer,\n  users: usersReducer,\n  userId: userIdReducer,\n  comments: commentsReducer,\n  hiding: hidingReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport const isLoading = (state: RootState) => state.loading;\nexport const getPosts = (state: RootState) => state.posts;\nexport const getPostId = (state: RootState) => state.postId;\nexport const getPost = (state: RootState) => state.post;\nexport const getUsers = (state: RootState) => state.users;\nexport const getUserId = (state: RootState) => state.userId;\nexport const getComments = (state: RootState) => state.comments;\nexport const isHiding = (state: RootState) => state.hiding;\n\nexport const loadPosts = (userId?: number) => {\n  return async (dispatch: Dispatch<unknown>) => {\n    dispatch(startLoading());\n\n    try {\n      const posts = await getUserPosts(userId);\n\n      dispatch(setPosts(posts));\n    } catch (error) {\n      dispatch(setPosts([]));\n    }\n\n    dispatch(finishLoading());\n  };\n};\n\nexport const loadPost = (postId: number) => {\n  return async (dispatch: Dispatch<unknown>) => {\n    dispatch(startLoading());\n\n    try {\n      const post = await getPostDetails(postId);\n\n      dispatch(setPost(post));\n    } catch (error) {\n      dispatch(setPost({\n        id: 0,\n        userId: 0,\n        title: '',\n        body: '',\n      }));\n    }\n\n    dispatch(finishLoading());\n  };\n};\n\nexport const loadUsers = () => {\n  return async (dispatch: Dispatch<unknown>) => {\n    dispatch(startLoading());\n\n    try {\n      const users = await getAllUsers();\n\n      dispatch(setUsers(users));\n    } catch (error) {\n      dispatch(setUsers([]));\n    }\n\n    dispatch(finishLoading());\n  };\n};\n\nexport const loadComments = (postId: number) => {\n  return async (dispatch: Dispatch<unknown>) => {\n    dispatch(startLoading());\n\n    try {\n      const comments = await getPostComments(postId);\n\n      dispatch(setComments(comments));\n    } catch (error) {\n      dispatch(setComments([]));\n    }\n\n    dispatch(finishLoading());\n  };\n};\n\nexport const removePost = (postId: number) => {\n  return async (dispatch: Dispatch<unknown>) => {\n    try {\n      await deletePost(postId);\n\n      const allPosts = await getUserPosts();\n\n      dispatch(setPosts(allPosts));\n    } catch {\n      dispatch(setPosts([]));\n    }\n  };\n};\n\nexport const removeComment = (commentId: number, postId: number) => {\n  return async (dispatch: Dispatch<unknown>) => {\n    try {\n      await deleteComment(commentId);\n\n      const allComments = await getPostComments(postId);\n\n      dispatch(setComments(allComments));\n    } catch {\n      dispatch(setComments([]));\n    }\n  };\n};\n\nexport const createComment = (\n  postId: number,\n  body: string,\n  email: string,\n  name: string,\n) => {\n  return async (dispatch: Dispatch<unknown>) => {\n    try {\n      await postNewComment(postId, body, email, name);\n\n      const allComments = await getPostComments(postId);\n\n      dispatch(setComments(allComments));\n    } catch {\n      dispatch(setComments([]));\n    }\n  };\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk)),\n);\n\nexport default store;\n","import { useDispatch, useSelector } from 'react-redux';\nimport {\n  isLoading,\n  loadPosts,\n  loadUsers,\n} from '../../store';\nimport { Loader } from '../Loader';\nimport './Start.scss';\n\nexport const Start = () => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n\n  const handleClick = () => {\n    dispatch(loadUsers());\n    dispatch(loadPosts());\n  };\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className=\"Start__button\"\n        onClick={handleClick}\n      >\n        Start\n      </button>\n\n      {loading && <Loader />}\n    </>\n  );\n};\n","import { request } from './api';\n\nexport const getAllUsers = () => {\n  return request('/users');\n};\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport {\n  getPosts,\n  getPostId,\n  removePost,\n  loadComments,\n  loadPost,\n} from '../../store';\nimport { setPostId } from '../../store/postId';\nimport './PostsList.scss';\n\nexport const PostsList: React.FC = () => {\n  const dispatch = useDispatch();\n  const posts: Posts[] = useSelector(getPosts);\n  const postId = useSelector(getPostId);\n\n  const handleClick = (id: number) => {\n    dispatch(setPostId(postId === id ? 0 : id));\n    dispatch(loadComments(id));\n    dispatch(loadPost(id));\n  };\n\n  const handleDeleteClick = (id: number) => {\n    dispatch(removePost(id));\n  };\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      {posts.length === 0\n        ? (\n          <div className=\"App__sidebar--message\">\n            <p>\n              {'This user don\\'t have posts yet'}\n            </p>\n          </div>\n        )\n        : (\n          <ul className=\"PostsList__list\">\n            {posts.map(post => (\n              <li\n                key={post.id}\n                className=\"PostsList__item\"\n              >\n                <div className=\"PostsList__post\">\n                  <b>\n                    {`[User #${post.userId}]: `}\n                  </b>\n                  <b>{post.title}</b>\n                  <p>{post.body}</p>\n                </div>\n\n                <div className=\"PostsList__buttons\">\n                  <button\n                    type=\"button\"\n                    className={classNames(\n                      'PostsList__user-button button',\n                      {\n                        'PostsList__user-button--selected':\n                          postId === post.id,\n                      },\n                    )}\n                    onClick={() => handleClick(post.id)}\n                  >\n                    {postId === post.id ? 'Close' : 'Open'}\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    className={classNames(\n                      'PostsList__user-button button',\n                      'PostsList__user-button--delete',\n                    )}\n                    onClick={() => handleDeleteClick(post.id)}\n                  >\n                    X\n                  </button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n    </div>\n  );\n};\n","import React, { useMemo, useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport { getPostId, createComment } from '../../store';\nimport './NewCommentForm.scss';\n\nexport const NewCommentForm: React.FC = () => {\n  const dispatch = useDispatch();\n  const postId = useSelector(getPostId);\n  const [body, setBody] = useState('');\n  const [email, setEmail] = useState('');\n  const [userName, setName] = useState('');\n  const [isValidForm, setIsValidForm] = useState(true);\n\n  // eslint-disable-next-line no-useless-escape\n  const validator = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n\n  const changeInput = (event: React.ChangeEvent<HTMLInputElement\n  | HTMLTextAreaElement>) => {\n    const { name, value } = event.target;\n\n    setIsValidForm(true);\n\n    switch (name) {\n      case 'body':\n        setBody(value);\n        break;\n\n      case 'email':\n        setEmail(value);\n        break;\n\n      case 'name':\n        setName(value);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const resetForm = () => {\n    setBody('');\n    setEmail('');\n    setName('');\n    setIsValidForm(true);\n  };\n\n  const validation = useMemo(() => {\n    return (userName.length > 0\n      && body.length > 0\n      && validator.test(email)\n    );\n  }, [email, body, userName]);\n\n  const onSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    if (validation) {\n      dispatch(createComment(postId, body, email, userName));\n      resetForm();\n    } else {\n      setIsValidForm(false);\n    }\n  };\n\n  useEffect(() => {\n    resetForm();\n  }, [postId]);\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={onSubmit}\n    >\n      {!isValidForm && (\n        <p className=\"NewCommentForm__error\">Enter correct information</p>\n      )}\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          value={userName}\n          className={classNames(\n            'NewCommentForm__input',\n            {\n              'NewCommentForm__input--error':\n                (!isValidForm && userName.length === 0),\n            },\n          )}\n          onChange={changeInput}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          value={email}\n          className={classNames(\n            'NewCommentForm__input',\n            {\n              'NewCommentForm__input--error':\n                (!isValidForm && !validator.test(email)),\n            },\n          )}\n          onChange={changeInput}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          value={body}\n          className={classNames(\n            'NewCommentForm__input',\n            {\n              'NewCommentForm__input--error':\n                (!isValidForm && body.length === 0),\n            },\n          )}\n          onChange={changeInput}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NewCommentForm } from '../NewCommentForm';\nimport {\n  getPost,\n  getPostId,\n  getComments,\n  isHiding,\n  removeComment,\n} from '../../store';\nimport { hideComments } from '../../store/hideComments';\nimport './PostDetails.scss';\n\nexport const PostDetails: React.FC = () => {\n  const dispatch = useDispatch();\n  const post = useSelector(getPost);\n  const postId = useSelector(getPostId);\n  const comments: Comments[] = useSelector(getComments);\n  const hide = useSelector(isHiding);\n\n  const handleClickOnHideButton = () => {\n    dispatch(hideComments());\n  };\n\n  const handleClickOnDeleteButton = (id: number) => {\n    dispatch(removeComment(id, postId));\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      {post && (\n        <>\n          <section className=\"PostDetails__post\">\n            <p>\n              {post.body}\n            </p>\n          </section>\n\n          <section className=\"PostDetails__comments\">\n            {comments.length > 0 && (\n              <button\n                type=\"button\"\n                className=\"button\"\n                onClick={handleClickOnHideButton}\n              >\n                {hide ? 'Show ' : 'Hide '}\n                {comments.length}\n                {comments.length > 1 ? ' comments' : ' comment'}\n              </button>\n            )}\n\n            {!hide && (\n              <ul className=\"PostDetails__list\">\n                {comments.map(comment => (\n                  <li\n                    key={comment.id}\n                    className=\"PostDetails__list-item\"\n                  >\n                    <button\n                      type=\"button\"\n                      className=\"PostDetails__remove-button button\"\n                      onClick={() => handleClickOnDeleteButton(comment.id)}\n                    >\n                      X\n                    </button>\n                    <p>{comment.body}</p>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </section>\n\n          <section>\n            <div className=\"PostDetails__form-wrapper\">\n              <NewCommentForm />\n            </div>\n          </section>\n        </>\n      )}\n    </div>\n  );\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { Loader } from './components/Loader';\nimport './styles/general.scss';\nimport './App.scss';\nimport { Start } from './components/Start/Start';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport {\n  isLoading,\n  getPosts,\n  getUsers,\n  loadPosts,\n  getPostId,\n  getUserId,\n} from './store';\nimport { setUserId } from './store/userId';\n\nconst App: React.FC = () => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n  const posts = useSelector(getPosts);\n  const users: Users[] = useSelector(getUsers);\n  const postId = useSelector(getPostId);\n  const userId = useSelector(getUserId);\n\n  const handleSelectChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    dispatch(setUserId(+event.target.value));\n    dispatch(loadPosts(+event.target.value));\n  };\n\n  return (\n    <div className=\"App\">\n      {(posts.length === 0 && userId === 0)\n        ? (\n          <Start />\n        )\n        : (\n          <>\n            <header className=\"App__header\">\n              <label>\n                Select a user: &nbsp;\n\n                <select\n                  className=\"App__user-selector\"\n                  onChange={handleSelectChange}\n                >\n                  <option value=\"0\">All users</option>\n                  {users.map(user => (\n                    <option\n                      key={user.id}\n                      value={user.id}\n                    >\n                      {user.name}\n                    </option>\n                  ))}\n                </select>\n              </label>\n            </header>\n\n            <main className=\"App__main\">\n              <div className=\"App__sidebar\">\n                {loading && <Loader />}\n                <PostsList />\n              </div>\n\n              <div className=\"App__content\">\n                <h2>Post details:</h2>\n\n                {loading && <Loader />}\n\n                {postId !== 0\n                  ? (\n                    <PostDetails />\n                  )\n                  : (\n                    <div className=\"App__sidebar--message\">\n                      <p>Choose a post to see a detail</p>\n                    </div>\n                  )}\n              </div>\n            </main>\n          </>\n        )}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}